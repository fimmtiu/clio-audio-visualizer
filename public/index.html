<html>
  <head></head>
  <body>
    <script src="./js/howler.min.js"></script>
    <script src="./js/util/loop_timer.js"></script>
    <script type="text/javascript" src="./test_data/volume_events.js"></script>
    <script>
      Howler.volume(0.3);
      let actors = {}

      actors["crowd"] = new Howl({
        src: ['./audio/crowd.mp3'],
        volume: 0.0
      });

      actors["monkey"] = new Howl({
        src: ['./audio/monkey.mp3'],
        volume: 0.0
      });

      actors["forest"] = new Howl({
        src: ['./audio/forest_base.wav'],
        volume: 0.0,
		loop: true
      });

      actors["stream"] = new Howl({
        src: ['./audio/stream_base.wav'],
        volume: 0.0,
		loop: true
      });

      function beginSoundscape() {
        actors["forest"].play();
        actors["stream"].play();
		
        actors["forest"].fade(0, 0.5, 1000)
        actors["stream"].fade(0, 0.5, 1000)

        processVolumeEvents();
      }

      function processVolumeEvents() {
        loopThroughArray(volumeEvents, function (volumeEvent) {
          for (var k in volumeEvent) {
            const currentVolume = actors[k].volume();
            console.log("setting volume on actor")
            actors[k].fade(currentVolume, volumeEvent[k], 250);
          }
        }, 5000);
      }
    </script>
    <marquee><button onclick="beginSoundscape()">Experience the soothing sounds of chainsaws...in a rain forest</button></marquee>
  </body>
</html>
